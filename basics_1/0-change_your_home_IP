#!/usr/bin/env bash
# Script that configures localhost and facebook.com IPs

# Backup /etc/hosts
cp /etc/hosts /etc/hosts.bak

# Create a temp file
tmpfile=$(mktemp)

# Keep all lines that are not localhost or facebook.com
grep -v -E '(^127\.0\.0\.1\s+localhost|^127\.0\.0\.2\s+localhost|facebook\.com)' /etc/hosts > "$tmpfile"

# Add the new entries
echo "127.0.0.2 localhost" >> "$tmpfile"
echo "8.8.8.8 facebook.com" >> "$tmpfile"

# Replace /etc/hosts safely
sudo cp "$tmpfile" /etc/hosts
rm "$tmpfile"
